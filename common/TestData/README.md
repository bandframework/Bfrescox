bfrescox Tests
============================

Elastic Template Tests
----------------------

The test suite is contained in `TestSuite_Elastic.json`. These tests cover the problem of generating, filling in a template for elastic scattering problems using `bfrescox.generate_elastic_template`, running bfrescox on 
that problem, and verifying that the results match expected baselines.

- `78Ni_template` is elastic scattering of protons on 78Ni at 50 MeV, using a local optical potential + the Coulomb potential. This is adapted from the example on the [frescox documentation site](https://www.fresco.org.uk/examples/B1-example-el.in). There are two tests corresponding to two different parameter points for the same template:  
    - `PointA` uses a Woods-Saxon potential with parameters V=40 MeV, r0=1.2 fm, a=0.65 fm, W=10 MeV, rw=1.2 fm, aw=0.5 fm. The expected input file is `Ni78_p_elastic_PointA.nml`, and the expected data is contained in `Ni78_p_elastic_PointA_differential_xs_baseline.csv`.
    - `PointB` includes the same volume terms as `pointA` but adds a spin-orbit term with Vso=8 MeV, rso=1.0 fm, aso=0.65 fm, Wso = 4 MeV, rwso=1.0 fm, awso=0.65 fm. The expected input file is `Ni78_p_elastic_PointB.nml`, and the expected data is contained in `Ni78_p_elastic_PointB_differential_xs_baseline.csv`.

Both of these tests are for both the functionality in `generate_elastic_template` (comparing the generated template file to an expected template file), and for the full end-to-end functionality of filling in the template, running bfrescox, and comparing the results to expected baselines.

Inelastic Template Tests
------------------------
The test suite is contained in `TestSuite_Inelastic.json`. These tests cover the problem of generating, filling in a template for inelastic scattering problems using `bfrescox.generate_inelastic_template`, running bfrescox on 
that problem, and verifying that the results match expected baselines corresponding to cross sections for elastic and inelastic scattering to specified excited states, parsed from the fort.16 output file. 

- The `12C_4He_template` test are adapted from the B2-example-inel2 example on the [frescox documentation site](https://www.fresco.org.uk/examples/B2-example-inel2.in). The expected template is `12C_4He_inelastic.template`. There are two tests corresponding to two different parameter points for the same template:

    - `PointA` uses a Woods-Saxon potential with parameters V=40 MeV, r0=1.2 fm, a=0.65 fm, W=10 MeV, rw=1.2 fm, aw=0.5 fm. The expected input file is `12C_4He_inelastic_PointA.nml`, and the expected contents of the resultiong fort.16 is contained in `12C_4He_inelastic_PointA_fort16.pkl`.
    - `PointB` includes the same volume terms as `pointA` but adds a spin-orbit term with Vso=8 MeV, rso=1.0 fm, aso=0.65 fm, Wso = 4 MeV, rwso=1.0 fm, awso=0.65 fm. The expected input file is `12C_4He_inelastic_PointB.nml`, and the expected contents of the resultiong fort.16 is contained in `12C_4He_inelastic_PointB_fort16.pkl`.



User Provided Template Tests
----------------------

The test suite is contained in `TestSuite_UserProvidedTemplates.json`. User provided templates are any otherwise valid FRESCOX namelist input files that have placeholders for parameters that bfrescox can fill in. These tests cover cases not included  in the templates that can be generated by bfrescox itself. 

- `48Ca` is the elastic scattering of neutrons on 48Ca using a non-local potential. The template is provided in the test suite as `TestData/48Ca_Ozge.template`. The test corresponds to only a single parameter point, with `48Ca_OzgePointA.nml` as the expected input file, and `48Ca_OzgePointA_differential_xs_baseline.csv` as the expected data.

